"use strict";$(function(){var e="",t=$.cookie("token");console.log(t),console.log("aa"),$.get("http://47.104.244.134:8080/cartlist.do",{token:t},function(t){for(var o in t)e+='<ul class="good">\n\t\t\t\t\t\t<li class="good_1">\n\t\t\t\t\t\t\t<input type="checkbox" class="goodscheck" id="'+t[o].gid+'">\n\t\t\t\t\t\t\t<img src="http:'+t[o].goods.picurl+'" alt="">\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="good_2">'+t[o].goods.name+'</li>\n\t\t\t\t\t\t<li class="good_3">\n\t\t\t\t\t\t\t<p>颜色：<span>粉色</span></p>\n\t\t\t\t\t\t\t<p>尺码：<span>37</span></p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="good_4">\n\t\t\t\t\t\t\t<span class="danjia">'+t[o].goods.price+'</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="good_5">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<span class="jian" id="'+t[o].gid+'">-</span>\n\t\t\t\t\t\t\t\t<span class="num">'+t[o].count+'</span>\n\t\t\t\t\t\t\t\t<span class="jia" id="'+t[o].gid+'">+</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="good_6">\n\t\t\t\t\t\t\t<span class="danzongjia">'+t[o].goods.price*t[o].count+'</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="good_7">\n\t\t\t\t\t\t\t<p>移入收藏夹</p>\n\t\t\t\t\t\t\t<p class="remove" id="'+t[o].gid+'">删除</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>',$(".goodslist")[0].innerHTML=e;function n(){for(o=0;o<$(".goodscheck").length;o++)$(".goodscheck")[o].checked?$($(".goodscheck")[o]).addClass("total_price"):$($(".goodscheck")[o]).removeClass("total_price");for(var t=0,n=0;n<$(".total_price").length;n++)t+=parseInt($($(".total_price")[n]).parent().parent().find(".danzongjia").text());console.log(t),$("#all_price").text(t)}$(".qx").click(function(){$(".goodscheck").prop("checked",$(this).prop("checked")),n()}),$(".goodscheck").click(function(){$(".goodscheck:checked").length==$("ul").length?$(".qx").prop("checked",!0):$(".qx").prop("checked",!1),n()}),$(".select_all").click(function(){$(".goodscheck").prop("checked",$(this).prop("checked")),n()}),$(".goodscheck").click(function(){$(".goodscheck:checked").length==$("ul").length?$(".select_all").prop("checked",!0):$(".select_all").prop("checked",!1),n()}),$(".jia").css("cursor","pointer"),$(".jian").css("cursor","pointer"),$(".jia").click(function(){$(this).parent().parent().parent().find(".danzongjia").text(parseInt($(this).parent().parent().parent().find(".danzongjia").text())+parseInt($(this).parent().parent().parent().find(".danjia").text()));var e=$(this).prop("id"),i=(parseInt($(this).parent().find(".num").text()),$.cookie("token"));$(this).parent().find(".num").text(parseInt($(this).parent().find(".num").text())+1),$.get("http://47.104.244.134:8080/cartlist.do",{token:i},function(t){var n=void 0;for(var o in console.log(t),console.log(e),t)console.log(t[o]),t[o].gid==e&&(n=t[o].id);$.get("http://47.104.244.134:8080/cartupdate.do",{id:n,gid:e,num:1,token:i},function(t){})}),n()}),$(".jian").click(function(){if($(this).parent().find(".num").text()<=0)$(this).parent().find(".num").text(0);else{$(this).parent().parent().parent().find(".danzongjia").text(parseInt($(this).parent().parent().parent().find(".danzongjia").text())-parseInt($(this).parent().parent().parent().find(".danjia").text()));var e=$(this).prop("id"),i=(parseInt($(this).parent().find(".num").text()),$.cookie("token"));$(this).parent().find(".num").text(parseInt($(this).parent().find(".num").text())-1),$.get("http://47.104.244.134:8080/cartlist.do",{token:i},function(t){var n=void 0;for(var o in console.log(t),console.log(e),t)console.log(t[o]),t[o].gid==e&&(n=t[o].id);$.get("http://47.104.244.134:8080/cartupdate.do",{id:n,gid:e,num:-1,token:i},function(t){})})}n()}),$(".remove").click(function(){$(this).parent().parent().remove();var e=$(this).prop("id"),i=$.cookie("token");$.get("http://47.104.244.134:8080/cartlist.do",{token:i},function(t){var n=void 0;for(var o in console.log(t),console.log(e),t)console.log(t[o]),t[o].gid==e&&(n=t[o].id);$.get("http://47.104.244.134:8080/cartupdate.do",{id:n,gid:e,num:0,token:i},function(t){})}),n()}),$(".delete").click(function(){for(o=0;o<$(".goodscheck").length;o++)$(".goodscheck")[o].checked&&$($(".goodscheck")[o]).addClass("xuyaoshan");for(var i=[],t=0;t<$(".xuyaoshan").length;t++)i.push($($(".xuyaoshan")[t]).prop("id"));console.log(i);var c=$.cookie("token");$(".xuyaoshan").parent().parent().remove(),$.get("http://47.104.244.134:8080/cartlist.do",{token:c},function(t){for(var n=void 0,o=0;o<i.length;o++){for(var e in console.log(i[o]),t)t[e].gid==i[o]&&(n=t[e].id);$.get("http://47.104.244.134:8080/cartupdate.do",{id:n,gid:parseInt(i[o]),num:0,token:c},function(t){})}}),n()})})});